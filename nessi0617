-- [[ NESSI HUB MODERN EDITION : PART 1 (UI) ]]
local LP = game:GetService("Players").LocalPlayer
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

if LP.PlayerGui:FindFirstChild("NessiModern") then LP.PlayerGui.NessiModern:Destroy() end

_G.NessiConfig = _G.NessiConfig or {
    MapAttack = false, FastAttack = false, InstantKill = false,
    GhostShipFarm = false, SBFarm = false, AutoRaid = false,
    Hitbox = false, HitboxSize = 35, AirWalk = false, SpeedHack = false, StepSpeed = 5, -- é€Ÿåº¦ã‚’5ã«ã‚¢ãƒƒãƒ—
    StickActive = false, TargetPlayer = nil
}
_G.LastRefresh = 0

-- --- ã€UI æ§‹ç¯‰ã€‘ ---
local sg = Instance.new("ScreenGui", LP.PlayerGui); sg.Name = "NessiModern"; sg.ResetOnSpawn = false
local main = Instance.new("Frame", sg)
main.Size = UDim2.new(0, 320, 0, 550)
main.Position = UDim2.new(0.05, 0, 0.15, 0)
main.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
main.BackgroundTransparency = 0.1
main.Active = true
main.Draggable = true

local corner = Instance.new("UICorner", main); corner.CornerRadius = UDim.new(0, 15)
local stroke = Instance.new("UIStroke", main); stroke.Color = Color3.fromRGB(0, 255, 150); stroke.Thickness = 2; stroke.Transparency = 0.5

-- ã‚¿ã‚¤ãƒˆãƒ«
local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1, 0, 0, 50)
title.Text = "ğŸ NESSI MODERN v2"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 18
title.Font = Enum.Font.GothamBold
title.BackgroundTransparency = 1

-- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆæ©Ÿèƒ½ãƒˆã‚°ãƒ«ç”¨ï¼‰
local scroll = Instance.new("ScrollingFrame", main)
scroll.Size = UDim2.new(1, -20, 0, 300)
scroll.Position = UDim2.new(0, 10, 0, 60)
scroll.BackgroundTransparency = 1
scroll.CanvasSize = UDim2.new(0, 0, 2.5, 0)
scroll.ScrollBarThickness = 0 -- ã‚¹ãƒƒã‚­ãƒªã•ã›ã‚‹ãŸã‚ã«æ¶ˆã™ãœ

local layout = Instance.new("UIListLayout", scroll); layout.Padding = UDim.new(0, 8)

-- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠã‚¨ãƒªã‚¢ï¼ˆç‹¬ç«‹ï¼‰
local targetFrame = Instance.new("Frame", main)
targetFrame.Size = UDim2.new(1, -20, 0, 150)
targetFrame.Position = UDim2.new(0, 10, 1, -165)
targetFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
Instance.new("UICorner", targetFrame).CornerRadius = UDim.new(0, 10)

local pTitle = Instance.new("TextLabel", targetFrame)
pTitle.Size = UDim2.new(1, 0, 0, 25)
pTitle.Text = "ğŸ¯ TARGET SELECTOR (30s)"
pTitle.TextColor3 = Color3.fromRGB(0, 255, 255)
pTitle.Font = Enum.Font.GothamBold
pTitle.TextSize = 12
pTitle.BackgroundTransparency = 1

local pScroll = Instance.new("ScrollingFrame", targetFrame)
pScroll.Size = UDim2.new(1, -10, 1, -35)
pScroll.Position = UDim2.new(0, 5, 0, 30)
pScroll.BackgroundTransparency = 1
pScroll.CanvasSize = UDim2.new(0, 0, 10, 0)
pScroll.ScrollBarThickness = 2
Instance.new("UIListLayout", pScroll).Padding = UDim.new(0, 3)

-- --- ã€ãƒœã‚¿ãƒ³ä½œæˆé–¢æ•°ï¼ˆãƒ¢ãƒ€ãƒ³ç‰ˆï¼‰ã€‘ ---
_G.CreateNessiToggle = function(name, configKey)
    local btn = Instance.new("TextButton", scroll)
    btn.Size = UDim2.new(1, 0, 0, 40)
    btn.BackgroundColor3 = Color3.fromRGB(45, 45, 50)
    btn.Text = name
    btn.TextColor3 = Color3.fromRGB(200, 200, 200)
    btn.Font = Enum.Font.GothamSemibold
    btn.TextSize = 13
    local bCorner = Instance.new("UICorner", btn)
    
    -- æ›´æ–°é–¢æ•°
    local function update()
        local active = _G.NessiConfig[configKey]
        TweenService:Create(btn, TweenInfo.new(0.3), {
            BackgroundColor3 = active and Color3.fromRGB(0, 180, 100) or Color3.fromRGB(45, 45, 50),
            TextColor3 = active and Color3.new(1, 1, 1) or Color3.fromRGB(200, 200, 200)
        }):Play()
    end
    
    btn.MouseButton1Click:Connect(function()
        _G.NessiConfig[configKey] = not _G.NessiConfig[configKey]
        update()
    end)
    update()
end

-- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒªã‚¹ãƒˆæ›´æ–°
_G.RefreshPlayerList = function()
    for _, child in pairs(pScroll:GetChildren()) do if child:IsA("TextButton") then child:Destroy() end end
    for _, p in pairs(game:GetService("Players"):GetPlayers()) do
        if p ~= LP then
            local pBtn = Instance.new("TextButton", pScroll)
            pBtn.Size = UDim2.new(1, 0, 0, 28); pBtn.Text = p.DisplayName; pBtn.Font = Enum.Font.Gotham; pBtn.TextSize = 11; pBtn.TextColor3 = Color3.new(1, 1, 1)
            pBtn.BackgroundColor3 = (_G.NessiConfig.TargetPlayer == p) and Color3.fromRGB(0, 150, 255) or Color3.fromRGB(50, 50, 60)
            Instance.new("UICorner", pBtn)
            pBtn.MouseButton1Click:Connect(function() _G.NessiConfig.TargetPlayer = p _G.RefreshPlayerList() end)
        end
    end
end

UIS.InputBegan:Connect(function(i, g) if not g and i.KeyCode == Enum.KeyCode.RightControl then main.Visible = not main.Visible end end)-- [[ NESSI HUB MODERN : PART 2 ]]
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Net = ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")
local RegAttack = Net:WaitForChild("RE/RegisterAttack")
local RegHit = Net:WaitForChild("RE/RegisterHit")

-- --- ã€1. Aimbot Hook (å¯¾ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å¿…ä¸­åŒ–)ã€‘ ---
local function InitAimbotHook()
    local mt = getrawmetatable(game)
    local oldNamecall = mt.__namecall
    setreadonly(mt, false)
    
    mt.__namecall = newcclosure(function(self, ...)
        local method = getnamecallmethod()
        local args = {...}
        
        -- MapAttackãŒONã®æ™‚ã€å…¨æ”»æ’ƒã®çŸ›å…ˆã‚’ã€ŒNPCã€ã‹ã€Œãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€ã«å‘ã‘ã‚‹
        if _G.NessiConfig.MapAttack and tostring(method) == "FireServer" then
            if tostring(self) == "RemoteEvent" or tostring(self) == "LeftClickRemote" then
                -- NPCå„ªå…ˆã‚¹ã‚­ãƒ£ãƒ³
                for _, v in pairs(workspace.Enemies:GetChildren()) do
                    if v:FindFirstChild("HumanoidRootPart") and v.Humanoid.Health > 0 then
                        args[2] = v.HumanoidRootPart.Position
                        return oldNamecall(self, unpack(args))
                    end
                end
                -- æ¬¡ã«ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ã‚¹ã‚­ãƒ£ãƒ³ (PVP)
                for _, p in pairs(game.Players:GetPlayers()) do
                    if p ~= LP and p.Character and p.Character:FindFirstChild("HumanoidRootPart") and p.Character.Humanoid.Health > 0 then
                        args[2] = p.Character.HumanoidRootPart.Position
                        return oldNamecall(self, unpack(args))
                    end
                end
            end
        end
        return oldNamecall(self, ...)
    end)
    setreadonly(mt, true)
end
pcall(InitAimbotHook)

-- --- ã€2. ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œãƒ«ãƒ¼ãƒ—ï¼ˆæ”»æ’ƒãƒ»ãƒ•ã‚¡ãƒ¼ãƒ ãƒ»è¶³åŠ é€Ÿï¼‰ã€‘ ---
task.spawn(function()
    while task.wait() do
        -- ãƒªã‚¹ãƒˆ30ç§’æ›´æ–°
        if tick() - _G.LastRefresh > 30 then
            _G.LastRefresh = tick()
            if _G.RefreshPlayerList then _G.RefreshPlayerList() end
        end

        pcall(function()
            local char = LP.Character
            if not char or not char:FindFirstChild("HumanoidRootPart") then return end
            local root = char.HumanoidRootPart
            local hum = char:FindFirstChild("Humanoid")
            local tool = char:FindFirstChildOfClass("Tool")

            -- ã€è¶…é«˜é€Ÿãƒ»è¶³åŠ é€Ÿ (Speed Hack)ã€‘
            if _G.NessiConfig.SpeedHack and hum and hum.MoveDirection.Magnitude > 0 then
                -- åº§æ¨™ã‚’ç›´æ¥åŠ ç®—ã™ã‚‹ã“ã¨ã§ã€é€šå¸¸ã®ã‚¹ãƒ”ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¶…ãˆã‚‹é€Ÿåº¦ã‚’å‡ºã™ãœ
                char:TranslateBy(hum.MoveDirection * _G.NessiConfig.StepSpeed)
            end

            -- ã€å¯¾äººãƒ»å¯¾NPCãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ”»æ’ƒã€‘
            if _G.NessiConfig.MapAttack or _G.NessiConfig.FastAttack then
                local hitList = {}
                
                -- NPCã‚’ãƒªã‚¹ãƒˆã¸
                for _, v in pairs(workspace.Enemies:GetChildren()) do
                    if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 and v:FindFirstChild("HumanoidRootPart") then
                        table.insert(hitList, {v, v.HumanoidRootPart})
                    end
                end
                
                -- â˜…ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚‚ãƒªã‚¹ãƒˆã¸è¿½åŠ ï¼ˆã“ã‚Œã§ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã‚‚ãƒ•ã‚¡ã‚¹ãƒˆã‚¢ã‚¿ãƒƒã‚¯ãŒåˆºã•ã‚‹ï¼ï¼‰
                for _, p in pairs(game.Players:GetPlayers()) do
                    if p ~= LP and p.Character and p.Character:FindFirstChild("Humanoid") and p.Character.Humanoid.Health > 0 then
                        local pHrp = p.Character:FindFirstChild("HumanoidRootPart")
                        if pHrp then table.insert(hitList, {p.Character, pHrp}) end
                    end
                end
                
                if #hitList > 0 then
                    -- é™ç•Œã¾ã§ãƒ‘ã‚±ãƒƒãƒˆã‚’é£›ã°ã™ (0.01s)
                    RegAttack:FireServer(0.01)
                    RegHit:FireServer(hitList[1][2], hitList)
                    
                    -- ç›´æ¥ãƒªãƒ¢ãƒ¼ãƒˆã‚‚å©ã
                    if tool and tool:FindFirstChild("LeftClickRemote") then
                        tool.LeftClickRemote:FireServer(hitList[1][2].Position, 1)
                    end
                end
            end
            
            -- å³æ­» (NPCã®ã¿)
            if _G.NessiConfig.InstantKill then
                for _, v in pairs(workspace.Enemies:GetChildren()) do
                    if v:FindFirstChild("Humanoid") then v.Humanoid.Health = 0 end
                end
            end
        end)
    end
end)-- [[ NESSI HUB MODERN : PART 3 ]]
local RunService = game:GetService("RunService")

-- --- ã€1. ç©ºä¸­æ­©è¡Œ (Air Walk) ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã€‘ ---
local AirPlatform = Instance.new("Part", workspace)
AirPlatform.Name = "NessiModernAir"
AirPlatform.Size = Vector3.new(30, 1, 30)
AirPlatform.Transparency = 1
AirPlatform.Anchored = true

RunService.Stepped:Connect(function()
    if _G.NessiConfig.AirWalk and LP.Character and LP.Character:FindFirstChild("HumanoidRootPart") then
        AirPlatform.CFrame = LP.Character.HumanoidRootPart.CFrame * CFrame.new(0, -3.5, 0)
        AirPlatform.CanCollide = true
    else
        AirPlatform.CanCollide = false
        AirPlatform.CFrame = CFrame.new(0, -1000, 0)
    end
end)

-- --- ã€2. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼è¿½å°¾ (Stick) ãƒ­ã‚¸ãƒƒã‚¯ã€‘ ---
task.spawn(function()
    while task.wait() do
        if _G.NessiConfig.StickActive and _G.NessiConfig.TargetPlayer then
            pcall(function()
                local tChar = _G.NessiConfig.TargetPlayer.Character
                local myRoot = LP.Character and LP.Character:FindFirstChild("HumanoidRootPart")
                if tChar and tChar:FindFirstChild("HumanoidRootPart") and myRoot then
                    -- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®å°‘ã—å¾Œã‚ã«å¼µã‚Šä»˜ããœ
                    myRoot.CFrame = tChar.HumanoidRootPart.CFrame * CFrame.new(0, 0, 5)
                end
            end)
        end
    end
end)

-- --- ã€3. ãƒ’ãƒƒãƒˆãƒœãƒƒã‚¯ã‚¹æ‹¡å¤§ (NPCå°‚ç”¨)ã€‘ ---
task.spawn(function()
    while task.wait(0.5) do
        if _G.NessiConfig.Hitbox then
            pcall(function()
                for _, v in pairs(workspace.Enemies:GetChildren()) do
                    if v:FindFirstChild("HumanoidRootPart") then
                        v.HumanoidRootPart.Size = Vector3.new(_G.NessiConfig.HitboxSize, _G.NessiConfig.HitboxSize, _G.NessiConfig.HitboxSize)
                        v.HumanoidRootPart.Transparency = 0.8
                        v.HumanoidRootPart.CanCollide = false
                    end
                end
            end)
        end
    end
end)

-- --- ã€4. ãƒ¢ãƒ€ãƒ³UIã¸ãƒœã‚¿ãƒ³ã‚’ä¸€æ‹¬ç™»éŒ²ã€‘ ---
if _G.CreateNessiToggle then
    -- ãƒ¡ã‚¤ãƒ³æ”»æ’ƒï¼ˆPVP/NPCãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ï¼‰
    _G.CreateNessiToggle("å…¨ãƒãƒƒãƒ—ï¼†ã‚¨ã‚¤ãƒ ãƒ•ãƒƒã‚¯", "MapAttack")
    _G.CreateNessiToggle("æ¥µé™ãƒ•ã‚¡ã‚¹ãƒˆã‚¢ã‚¿ãƒƒã‚¯", "FastAttack")
    _G.CreateNessiToggle("NPCå³æ­» (Instant)", "InstantKill")
    
    -- ç§»å‹•
    _G.CreateNessiToggle("çˆ†é€Ÿãƒ»è¶³åŠ é€Ÿ (Speed)", "SpeedHack")
    _G.CreateNessiToggle("ç©ºä¸­æ­©è¡Œ (Air Walk)", "AirWalk")
    
    -- ãƒ•ã‚¡ãƒ¼ãƒ 
    _G.CreateNessiToggle("å¹½éœŠèˆ¹ã‚ªãƒ¼ãƒˆãƒ•ã‚¡ãƒ¼ãƒ ", "GhostShipFarm")
    _G.CreateNessiToggle("ã‚·ãƒ¼ãƒ“ãƒ¼ã‚¹ãƒˆç‹©ã‚Š", "SBFarm")
    _G.CreateNessiToggle("è‡ªå‹•ãƒ¬ã‚¤ãƒ‰ã‚¯ãƒªã‚¢", "AutoRaid")
    
    -- ãã®ä»–
    _G.CreateNessiToggle("ãƒ’ãƒƒãƒˆãƒœãƒƒã‚¯ã‚¹æ‹¡å¤§", "Hitbox")
    _G.CreateNessiToggle("ã€ï¼ã€‘ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¿½å°¾é–‹å§‹", "StickActive")
end

-- ä»•ä¸Šã’ï¼šåˆæœŸãƒªã‚¹ãƒˆæç”»
if _G.RefreshPlayerList then
    _G.RefreshPlayerList()
end

print("---------------------------------------")
print("ğŸ NESSI HUB MODERN v2 : ALL READY! ğŸ")
print("   - PVP/NPC Hybrid Combat Enabled")
print("   - Super Speed Enabled")
print("   - 30s Auto Refresh List Enabled")
print("---------------------------------------")
